// "use client";
// import React, { useRef } from "react";
// import { motion, useScroll, useTransform } from "framer-motion";

// const AboutUsMbl = () => {
//   const ref = useRef(null);

//   // watch scroll progress for this section
//   const { scrollYProgress } = useScroll({
//     target: ref,
//     offset: ["0 1", "1 1"], // animate between entering and leaving
//   });

//   // Map scroll -> path length (0 = invisible, 1 = fully drawn)
//   const pathLength = useTransform(scrollYProgress, [0.4, 1], [0, 1]);

//   return (
//     <div ref={ref} className="flex justify-start items-start h-[150vh]">
//       <motion.svg
//         width="388"
//         height="225"
//         viewBox="0 0 388 225"
//         fill="none"
//         xmlns="http://www.w3.org/2000/svg"
//       >
//         {/* Main path with stroke animation */}
//         <motion.path
//           d="M168.632 219.123C168.643 222.068 171.039 224.447 173.985 224.437C176.93 224.426 179.309 222.029 179.299 219.084C179.288 216.138 176.891 213.759 173.946 213.77C171 213.781 168.621 216.177 168.632 219.123ZM1.38109 163.429L0.381092 163.429L1.38109 163.429ZM245.244 60.763L244.244 60.763L245.244 60.763ZM205.244 99.763L41.3849 99.763L41.3849 101.763L205.244 101.763L205.244 99.763ZM38.4903 220.097L173.965 220.103L173.965 218.103L38.4904 218.097L38.4903 220.097ZM0.384924 140.756L0.381092 163.429L2.38109 163.429L2.38492 140.756L0.384924 140.756ZM0.381092 163.429L0.377957 181.976L2.37796 181.976L2.38109 163.429L0.381092 163.429ZM1.38125 164.429L23.3784 164.426L23.3781 162.426L1.38093 162.429L1.38125 164.429ZM246.244 60.763L246.244 41.8638L244.244 41.8638L244.244 60.763L246.244 60.763ZM285.244 2.86384L387.946 2.86384L387.946 0.863838L285.244 0.863838L285.244 2.86384ZM246.244 41.8638C246.244 20.3247 263.705 2.86384 285.244 2.86384L285.244 0.863838C262.601 0.863838 244.244 19.2202 244.244 41.8638L246.244 41.8638ZM0.377957 181.976C0.374406 203.028 17.4386 220.096 38.4903 220.097L38.4904 218.097C18.5434 218.096 2.37459 201.923 2.37796 181.976L0.377957 181.976ZM41.3849 99.763C18.744 99.763 0.388751 118.115 0.384924 140.756L2.38492 140.756C2.38856 119.22 19.8484 101.763 41.3849 101.763L41.3849 99.763ZM205.244 101.763C227.888 101.763 246.244 83.4067 246.244 60.763L244.244 60.763C244.244 82.3021 226.783 99.763 205.244 99.763L205.244 101.763Z"
//           stroke="white"
//           strokeWidth="2"
//           fill="transparent"
//           style={{
//             pathLength, // binds scroll progress to path animation
//           }}
//         />

//         {/* Keep your circles & inner graphics */}
//         <circle cx="40.8863" cy="163.324" r="30.172" fill="#EC967F" />
//         <circle cx="40.8862" cy="162.706" r="26.0986" fill="#E6795D" />
//         <circle
//           cx="40.8862"
//           cy="162.706"
//           r="22.5"
//           fill="url(#paint0_radial_1_3)"
//         />
//         <path
//           d="M36.8182 169.548C35.4316 169.548 34.4716 168.94 33.9382 167.724C33.4049 166.497 33.1382 165.02 33.1382 163.292C33.1382 161.574 33.3996 160.113 33.9222 158.908C34.4556 157.702 35.4209 157.1 36.8182 157.1C38.2156 157.1 39.1809 157.702 39.7142 158.908C40.2582 160.113 40.5302 161.569 40.5302 163.276C40.5302 165.004 40.2582 166.481 39.7142 167.708C39.1809 168.934 38.2156 169.548 36.8182 169.548ZM36.8182 167.66C37.1596 167.66 37.4316 167.537 37.6342 167.292C37.8476 167.046 38.0076 166.577 38.1142 165.884C38.2209 165.19 38.2742 164.188 38.2742 162.876C38.2742 161.617 38.1782 160.657 37.9862 159.996C37.8049 159.324 37.4156 158.988 36.8182 158.988C36.2209 158.988 35.8316 159.313 35.6502 159.964C35.4796 160.604 35.3942 161.51 35.3942 162.684C35.3942 164.049 35.4422 165.089 35.5382 165.804C35.6342 166.518 35.7836 167.009 35.9862 167.276C36.1889 167.532 36.4662 167.66 36.8182 167.66ZM42.6589 169.324V167.356H44.1949V160.252L42.5469 160.604V158.924L45.2829 157.324H46.4349V167.356H48.0029L47.9069 169.324H42.6589Z"
//           fill="white"
//         />

//         <defs>
//           <radialGradient
//             id="paint0_radial_1_3"
//             cx="0"
//             cy="0"
//             r="1"
//             gradientUnits="userSpaceOnUse"
//             gradientTransform="translate(40.8862 162.706) rotate(90) scale(22.5)"
//           >
//             <stop stopColor="#E6795D" />
//             <stop offset="1" stopColor="#EE360B" />
//           </radialGradient>
//         </defs>
//       </motion.svg>
//     </div>
//   );
// };

// export default AboutUsMbl;

"use client";
import React, { useRef, useEffect, useState } from "react";
import { motion, useScroll, useTransform } from "framer-motion";

const AboutUsMbl = () => {
  const ref = useRef<SVGPathElement>(null);
  const containerRef = useRef(null);
  const [pathLengthValue, setPathLengthValue] = useState(0);

  // Get total length of the path when mounted
  useEffect(() => {
    if (ref.current) {
      setPathLengthValue(ref.current.getTotalLength());
    }
  }, []);

  // Scroll tracking
  const { scrollYProgress } = useScroll({
    target: containerRef,
    offset: ["0 1", "1 1"],
  });

  // Map scroll progress → dashoffset (from full length → 0)
  const dashOffset = useTransform(
    scrollYProgress,
    [0.2, 1],
    [pathLengthValue, 0]
  );

  return (
    <div
      ref={containerRef}
      className="flex justify-start items-start h-[150vh] bg-red-500"
    >
      <motion.svg
        width="388"
        height="225"
        viewBox="0 0 388 225"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        {/* Length-based animated path */}
        <motion.path
          ref={ref}
          d="M168.632 219.123C168.643 222.068 171.039 224.447 173.985 224.437C176.93 224.426 179.309 222.029 179.299 219.084C179.288 216.138 176.891 213.759 173.946 213.77C171 213.781 168.621 216.177 168.632 219.123ZM1.38109 163.429L0.381092 163.429L1.38109 163.429ZM245.244 60.763L244.244 60.763L245.244 60.763ZM205.244 99.763L41.3849 99.763L41.3849 101.763L205.244 101.763L205.244 99.763ZM38.4903 220.097L173.965 220.103L173.965 218.103L38.4904 218.097L38.4903 220.097ZM0.384924 140.756L0.381092 163.429L2.38109 163.429L2.38492 140.756L0.384924 140.756ZM0.381092 163.429L0.377957 181.976L2.37796 181.976L2.38109 163.429L0.381092 163.429ZM1.38125 164.429L23.3784 164.426L23.3781 162.426L1.38093 162.429L1.38125 164.429ZM246.244 60.763L246.244 41.8638L244.244 41.8638L244.244 60.763L246.244 60.763ZM285.244 2.86384L387.946 2.86384L387.946 0.863838L285.244 0.863838L285.244 2.86384ZM246.244 41.8638C246.244 20.3247 263.705 2.86384 285.244 2.86384L285.244 0.863838C262.601 0.863838 244.244 19.2202 244.244 41.8638L246.244 41.8638ZM0.377957 181.976C0.374406 203.028 17.4386 220.096 38.4903 220.097L38.4904 218.097C18.5434 218.096 2.37459 201.923 2.37796 181.976L0.377957 181.976ZM41.3849 99.763C18.744 99.763 0.388751 118.115 0.384924 140.756L2.38492 140.756C2.38856 119.22 19.8484 101.763 41.3849 101.763L41.3849 99.763ZM205.244 101.763C227.888 101.763 246.244 83.4067 246.244 60.763L244.244 60.763C244.244 82.3021 226.783 99.763 205.244 99.763L205.244 101.763Z"
          stroke="white"
          strokeWidth="2"
          fill="transparent"
          strokeDasharray={pathLengthValue}
          style={{
            strokeDashoffset: dashOffset,
          }}
        />

        {/* Circles */}
        <circle cx="40.8863" cy="163.324" r="30.172" fill="#EC967F" />
        <circle cx="40.8862" cy="162.706" r="26.0986" fill="#E6795D" />
        <circle
          cx="40.8862"
          cy="162.706"
          r="22.5"
          fill="url(#paint0_radial_1_3)"
        />
        <path
          d="M36.8182 169.548C35.4316 169.548 34.4716 168.94 33.9382 167.724C33.4049 166.497 33.1382 165.02 33.1382 163.292C33.1382 161.574 33.3996 160.113 33.9222 158.908C34.4556 157.702 35.4209 157.1 36.8182 157.1C38.2156 157.1 39.1809 157.702 39.7142 158.908C40.2582 160.113 40.5302 161.569 40.5302 163.276C40.5302 165.004 40.2582 166.481 39.7142 167.708C39.1809 168.934 38.2156 169.548 36.8182 169.548ZM36.8182 167.66C37.1596 167.66 37.4316 167.537 37.6342 167.292C37.8476 167.046 38.0076 166.577 38.1142 165.884C38.2209 165.19 38.2742 164.188 38.2742 162.876C38.2742 161.617 38.1782 160.657 37.9862 159.996C37.8049 159.324 37.4156 158.988 36.8182 158.988C36.2209 158.988 35.8316 159.313 35.6502 159.964C35.4796 160.604 35.3942 161.51 35.3942 162.684C35.3942 164.049 35.4422 165.089 35.5382 165.804C35.6342 166.518 35.7836 167.009 35.9862 167.276C36.1889 167.532 36.4662 167.66 36.8182 167.66ZM42.6589 169.324V167.356H44.1949V160.252L42.5469 160.604V158.924L45.2829 157.324H46.4349V167.356H48.0029L47.9069 169.324H42.6589Z"
          fill="white"
        />

        <defs>
          <radialGradient
            id="paint0_radial_1_3"
            cx="0"
            cy="0"
            r="1"
            gradientUnits="userSpaceOnUse"
            gradientTransform="translate(40.8862 162.706) rotate(90) scale(22.5)"
          >
            <stop stopColor="#E6795D" />
            <stop offset="1" stopColor="#EE360B" />
          </radialGradient>
        </defs>
      </motion.svg>
    </div>
  );
};

export default AboutUsMbl;
